<h3>üë§ T√†i kho·∫£n</h3>

<div id="profileBox">ƒêang t·∫£i...</div>

<script>
    /* ============================
          LOAD USER FORMAT C≈®
    =============================== */
    function getUser(){
        return JSON.parse(localStorage.getItem("user") || "{}");
    }

    /* ============================
             LOAD PROFILE
    =============================== */
    async function loadProfile(){
        let user = getUser();

        if(!user.id){
            profileBox.innerHTML = "<p class='text-danger'>Kh√¥ng x√°c ƒë·ªãnh ƒë∆∞·ª£c ng∆∞·ªùi d√πng!</p>";
            return;
        }

        let r = await fetch(`/api/users/${user.id}`);
        let u = await r.json();

        profileBox.innerHTML = `
        <p><b>H·ªç t√™n:</b> ${u.firstName || ""} ${u.lastName || ""}</p>
        <p><b>Email:</b> ${u.email || "‚Äî"}</p>
        <p><b>S·ªë ƒëi·ªán tho·∫°i:</b> ${u.phone || "‚Äî"}</p>

        <button class="btn btn-danger mt-3" onclick="logout()">
            ƒêƒÉng xu·∫•t
        </button>
    `;
    }

    /* ============================
                LOGOUT
    =============================== */
    function logout(){
        localStorage.removeItem("user");
        localStorage.removeItem("cart");
        window.location.href = "/login";
    }

    loadProfile();
</script>
